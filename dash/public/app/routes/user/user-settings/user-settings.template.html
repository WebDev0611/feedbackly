<div class="card-title" translate>Settings</div>

<div class="row">
  <div class="col s12 m12 l6">
    <form ng-submit="userSettings.saveSettings(settingsForm.$valid)" name="settingsForm" novalidate>
      <div input-field ng-class="{ 'input-field-error': settingsForm.displayname.$invalid && settingsForm.displayname.$dirty }">
        <input type="text" ng-model="userSettings.user.displayname" name="displayname" ng-minlength="2" required>
        <label translate>Displayname</label>
      </div>

      <h6 translate>Dashboard language</h6>

      <select ng-model="userSettings.user.settings.locale" material-select>
        <option ng-repeat="language in ::userSettings.availableLanguages" value="{{::language.code}}">{{::language.text}}</option>
      </select>

      <p>
        <input type="checkbox" id="device-state-checkbox" ng-model="userSettings.user.settings.send_device_notifications"/>
        <label for="device-state-checkbox" translate>Send me notifications about the state of my devices</label>
      </p>

      <p>
        <input type="checkbox" ng-model="userSettings.user.settings.receive_digest" id="weekly-digest-checkbox" />
        <label for="weekly-digest-checkbox" translate>Send me weekly report</label>
      </p>

      <button class="waves-effect waves-light btn" ng-class="{ 'disabled': settingsForm.$invalid }" translate>Save</button>
    </form>
  </div>

  <div class="col s12 m12 l6">
    <form ng-submit="userSettings.savePassword(passwordForm.$valid)" name="passwordForm" novalidate>
      <div input-field ng-class="{ 'input-field-error': passwordForm.password.$invalid && passwordForm.password.$dirty }">
        <input type="password" ng-model="userSettings.user.password" name="password" required ng-minlength="6">
        <label translate>Password</label>
      </div>

      <div input-field ng-class="{ 'input-field-error': passwordForm.passwordConfirmation.$invalid && passwordForm.passwordConfirmation.$dirty }">
        <input type="password" ng-model="userSettings.user.passwordConfirmation" name="passwordConfirmation" required ng-minlength="6" match="userSettings.user.password">
        <label translate>Password confirmation</label>
      </div>

      <button class="waves-effect waves-light btn" ng-class="{ 'disabled': passwordForm.$invalid }" translate>Save</button>
    </form>
  </div>
</div>
